<div class="container">

    <?php if (empty($orders)): ?>
    <p>No orders found.</p>
    <?php else: ?>
    <div class="table-container">
        <h2 class="table-header">Manage Orders</h2>
        <table class="admin-table">
            <thead>
                <tr>
                   <th>ID</th>
                   <th>Date</th>
                   <th>Total</th>
                   <th>Delievery Adress</th>
                   <th>Phone</th>
                   <th>Status</th>
                   <th>Items</th>
                   <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($orders as $o): ?>
                <tr data-id="<?= $o['id'] ?>" class="data-row">
                    <td><?= htmlspecialchars($o['id']) ?></td>
                    <td><?= htmlspecialchars($o['user_name'] ?? 'Unknown') ?></td>
                    <td>$<?= number_format($o['total_price'], 2) ?></td>
                    <td><?= htmlspecialchars($o['shipping_address']) ?></td>
                    <td><?= htmlspecialchars($o['phone']) ?></td>
                    <td class="status-cell" data-field="status">
                        <span class="status-text"><?= htmlspecialchars($o['status']) ?></span>
                        <select class="status-select" style="display:none; width:100%; padding: 5px; border-radius: 4px;">
                            <option value="created" <?= $o['status'] === 'created' ? 'selected' : '' ?>>Created</option>
                            <option value="shipped" <?= $o['status'] === 'sipped' ? 'selected' : '' ?>>Shipped</option>
                            <option value="ready" <?= $o['status'] === 'ready' ? 'selected' : '' ?>>Ready</option>
                            <option value="done" <?= $o['status'] === 'done' ? 'selected' : '' ?>>Done</option>
                        </select>
                    </td>
                    <td><?= htmlspecialchars($o['date']) ?></td>
                    <td>
                        <button class="btn btn-warning btn-sm edit-status-btn">Edit Status</button>
                        <button class="btn btn-success btn-sm save-status-btn" style="display:none;">Save</button>
                        <button class="btn btn-secondary btn-sm cancel-status-btn" style="display:none;">Cancel</button>
                        <div class="status-message"></div>
                    </td>
                </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
    </div>
    <?php endif; ?>

    <a href="dashboard.php" class="profile-btn">Back to Dashboard</a>
</div>